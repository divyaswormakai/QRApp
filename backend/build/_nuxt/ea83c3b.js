(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1199:function(t,n,o){"use strict";o.d(n,"a",(function(){return c}));var e=o(203);var r=o(298);function c(t){return function(t){if(Array.isArray(t))return Object(e.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Object(r.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1234:function(t,n,o){"use strict";o.r(n);var e=o(26),r=o(1199),c=(o(113),o(114),o(642),o(140),o(297),o(202),o(89),o(88),o(22)),l={name:"School Forms",mounted:function(){var t,n,o=null===(t=window.location)||void 0===t||null===(n=t.pathname)||void 0===n?void 0:n.split("/")[3];this.schoolID=o,this.getSchoolFormList()},data:function(){return{schoolID:"",formList:[],columns:c.g}},methods:{downloadCSV:function(){var t="data:text/csv;charset=utf-8,";t+=[["S.No.","Full Name","Phone Number","Email","Student ID","Room Number","Date of Visit","Time of Visit"].join(",")].concat(Object(r.a)(this.formList.map((function(t,n){return[n+1,t.fullName,t.phoneNumber,t.email,t.studentID,t.roomNumber,t.dateOfVisit.slice(0,10),t.timeOfVisit].join(",")})))).join("\n").replace(/(^\[)|(\]$)/gm,"");var data=encodeURI(t),link=document.createElement("a");link.setAttribute("href",data);var n=new Date;link.setAttribute("download","forms-".concat(n.toISOString().split("T")[0],".csv")),link.click()},getSchoolFormList:function(){var t=this;return Object(e.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.post("/form/school/"+t.schoolID);case 2:o=n.sent,Array.isArray(null==o?void 0:o.data)||t.$message.error("Could not load forms data"),t.formList=null==o?void 0:o.data;case 5:case"end":return n.stop()}}),n)})))()}}},f=o(87),component=Object(f.a)(l,(function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",[o("h3",[t._v("List of all school forms in the past 28 days.")]),t._v(" "),o("a-button",{on:{click:function(n){return t.downloadCSV()}}},[t._v("Download CSV")]),t._v(" "),o("a-table",{attrs:{columns:t.columns,"data-source":t.formList,rowKey:function(t){return t.id},scroll:{x:1200}},scopedSlots:t._u([{key:"formID",fn:function(text,n,e){return o("span",{},[t._v(t._s(e+1))])}},{key:"fullName",fn:function(text,n){return o("p",{},[t._v(t._s(text))])}},{key:"dateOfVisit",fn:function(text,n){return o("span",{},[t._v("\n      "+t._s(text.split("T")[0])+"\n    ")])}}])})],1)}),[],!1,null,"6b13c748",null);n.default=component.exports}}]);