(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1233:function(e,t,r){"use strict";r.r(t);r(77),r(65),r(78),r(115),r(64),r(116);var o=r(54),n=r(26),m=(r(113),r(114),r(642),r(299),r(37),r(204),r(3)),l=r.n(m);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={name:"SchoolForm",mounted:function(){var e,t,r,o,n,m=null===(e=window.location)||void 0===e||null===(t=e.pathname)||void 0===t?void 0:t.split("/")[3];this.schoolID=m,this.roomNumber=null===(r=window)||void 0===r||null===(o=r.location)||void 0===o||null===(n=o.search)||void 0===n?void 0:n.split("=")[1],this.getSchoolName()},data:function(){return{schoolID:"",form:this.$form.createForm(this,{name:"coordinated"}),schoolName:"",formSubmitted:!1,currentTime:l()(),roomNumber:""}},methods:{getSchoolName:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("school/"+e.schoolID);case 2:(r=t.sent).data.schoolName?e.schoolName=r.data.schoolName:e.$message.error("Could not find the school. Please scan the QR again");case 4:case"end":return t.stop()}}),t)})))()},handleNewFormAddition:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.next=3,t.form.validateFields(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return t.$message.error("Could not submit form. Please try again."),e.abrupt("return");case 3:return o=d(d({},t.form.getFieldsValue()),{},{dateOfVisit:t.form.getFieldsValue().dateOfVisit.format("YYYY-MM-DD").toString(),timeOfVisit:t.form.getFieldsValue().timeOfVisit.format("hh:mm A").toString(),schoolID:t.schoolID}),e.next=6,t.$axios.post("form/school/add",o);case 6:e.sent.data.schoolID&&(t.$message.success("Your form has been received successfully"),t.formSubmitted=!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return r.stop()}}),r)})))()},closeWindow:function(){window.close()}}},v=r(87),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h2",[e._v("Please fill in the form below:")]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.formSubmitted,expression:"formSubmitted"}]},[o("h3",[e._v("\n      Your form has been submitted. You will receive a copy of the form that\n      you have submitted in the given email address.\n    ")]),e._v(" "),o("a",{on:{click:function(t){return e.closeWindow()}}},[o("i",[e._v("You can close this window.")])])]),e._v(" "),o("a-form",{directives:[{name:"show",rawName:"v-show",value:!e.formSubmitted,expression:"!formSubmitted"}],attrs:{form:e.form},on:{submit:e.handleNewFormAddition}},[o("p",{staticStyle:{background:"#9f9f9f"}},[o("b",[e._v(" Data Protection Notice:")]),e._v(" Your personal data is being collected for Covid-19 contact tracing.\n      The information you provide on this form will not be used for any other purpose.\n      Your information will be kept for 28 days in accordance with: The Health Act 1947\n      (Section 31A - Temporary Restrictions) (Covid-19) (No. 2) Regulations 2021 (SI 217 of 2021). "),o("br"),e._v(" "),o("b",[e._v("Powered by:")]),o("br"),e._v(" "),o("a",{attrs:{href:"https://e-society.ie"}},[o("img",{attrs:{src:r(643),alt:"E-society logo",width:"150"}})])]),e._v(" "),o("a-form-item",{attrs:{label:"Vendor"}},[o("a-input",{attrs:{disabled:""},model:{value:e.schoolName,callback:function(t){e.schoolName=t},expression:"schoolName"}})],1),e._v(" "),o("a-form-item",{attrs:{label:"Room Number"}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roomNumber",{initialValue:e.roomNumber}],expression:"[\n          'roomNumber',\n          {initialValue:roomNumber}\n        ]"}],attrs:{disabled:""}})],1),e._v(" "),o("a-form-item",{attrs:{label:"Email"}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,message:"Please input your email!"}]}],expression:"[\n          'email',\n          {\n            rules: [{ required: true, message: 'Please input your email!' }],\n          },\n        ]"}],attrs:{type:"email"}})],1),e._v(" "),o("a-form-item",{attrs:{label:"Full Name"}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fullName",{rules:[{required:!0,message:"Please input your full name!"}]}],expression:"[\n          'fullName',\n          {\n            rules: [\n              { required: true, message: 'Please input your full name!' },\n            ],\n          },\n        ]"}]})],1),e._v(" "),o("a-form-item",{attrs:{label:"Student ID"}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["studentID"],expression:"[\n          'studentID',\n\n        ]"}]})],1),e._v(" "),o("a-form-item",{attrs:{label:"Contact Number"}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phoneNumber",{rules:[{required:!0,message:"Please input your contact number!"}]}],expression:"[\n          'phoneNumber',\n          {\n            rules: [\n              {\n                required: true,\n                message: 'Please input your contact number!',\n              },\n            ],\n          },\n        ]"}]})],1),e._v(" "),o("a-form-item",{attrs:{label:"Date of Entry"}},[o("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["dateOfVisit",{rules:[{required:!0,message:"Please input your date of entry!"}],initialValue:e.currentTime}],expression:"[\n          'dateOfVisit',\n          {\n            rules: [\n              { required: true, message: 'Please input your date of entry!' },\n            ],\n                          initialValue: currentTime\n\n          },\n        ]"}],staticStyle:{width:"100%"},attrs:{format:"DD-MM-YYYY"}})],1),e._v(" "),o("a-form-item",{attrs:{label:"Time of Entry"}},[o("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["timeOfVisit",{rules:[{required:!0,message:"Please input your time of entry!"}],initialValue:e.currentTime}],expression:"[\n          'timeOfVisit',\n          {\n            rules: [\n              { required: true, message: 'Please input your time of entry!' },\n            ],\n            initialValue: currentTime\n          },\n        ]"}],staticStyle:{width:"100%"},attrs:{"use12-hours":"",format:"hh:mm A"}})],1),e._v(" "),o("a-form-item",[o("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(" Submit ")])],1)],1)],1)}),[],!1,null,"1a595a02",null);t.default=component.exports}}]);